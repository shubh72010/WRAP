<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pro Image Editor</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white min-h-screen flex flex-col items-center p-4">
  <h1 class="text-3xl font-bold mb-4">Pro Image Editor</h1>
  <div class="flex flex-col md:flex-row gap-4 w-full max-w-4xl">
    <div class="flex-1 bg-gray-800 p-4 rounded-xl shadow-xl">
      <input type="file" id="imgUpload" accept="image/*" class="mb-4 w-full" />
      <canvas id="canvas" class="w-full border border-gray-600 rounded"></canvas>
      <div class="mt-4">
        <label class="block">Add Text:</label>
        <input type="text" id="textInput" class="w-full p-2 rounded bg-gray-700" />
        <input type="color" id="textColor" class="mt-2" value="#ffffff" />
        <button id="addTextBtn" class="mt-2 w-full bg-blue-600 hover:bg-blue-700 p-2 rounded">Add Text</button>
      </div>
      <div class="mt-4">
        <label>Brightness</label>
        <input type="range" id="brightnessRange" min="-100" max="100" value="0" class="w-full" />
        <label>Contrast</label>
        <input type="range" id="contrastRange" min="-100" max="100" value="0" class="w-full" />
        <label>Saturation</label>
        <input type="range" id="saturationRange" min="-100" max="100" value="0" class="w-full" />
      </div>
      <div class="mt-4 flex gap-2">
        <button id="resetBtn" class="flex-1 bg-red-600 hover:bg-red-700 p-2 rounded">Reset</button>
        <button id="downloadBtn" class="flex-1 bg-green-600 hover:bg-green-700 p-2 rounded">Download</button>
      </div>
    </div>
  </div>  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const imgUpload = document.getElementById('imgUpload');
    const textInput = document.getElementById('textInput');
    const textColor = document.getElementById('textColor');
    const addTextBtn = document.getElementById('addTextBtn');
    const brightnessRange = document.getElementById('brightnessRange');
    const contrastRange = document.getElementById('contrastRange');
    const saturationRange = document.getElementById('saturationRange');
    const resetBtn = document.getElementById('resetBtn');
    const downloadBtn = document.getElementById('downloadBtn');

    let img = new Image();
    let originalImageData = null;

    function clamp(val) {
      return Math.max(0, Math.min(255, val));
    }

    function applyFilters() {
      if (!originalImageData) return;
      const brightness = parseInt(brightnessRange.value);
      const contrast = parseInt(contrastRange.value);
      const saturation = parseInt(saturationRange.value);

      const imageData = new ImageData(new Uint8ClampedArray(originalImageData.data), originalImageData.width, originalImageData.height);
      const data = imageData.data;

      for (let i = 0; i < data.length; i += 4) {
        let r = data[i], g = data[i + 1], b = data[i + 2];

        // Brightness
        r += brightness;
        g += brightness;
        b += brightness;

        // Contrast
        r = ((r - 128) * (contrast / 100 + 1)) + 128;
        g = ((g - 128) * (contrast / 100 + 1)) + 128;
        b = ((b - 128) * (contrast / 100 + 1)) + 128;

        // Saturation
        const avg = (r + g + b) / 3;
        r += (r - avg) * (saturation / 100);
        g += (g - avg) * (saturation / 100);
        b += (b - avg) * (saturation / 100);

        data[i] = clamp(r);
        data[i + 1] = clamp(g);
        data[i + 2] = clamp(b);
      }
      ctx.putImageData(imageData, 0, 0);
    }

    imgUpload.addEventListener('change', e => {
      const file = e.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = event => {
        img.onload = () => {
          canvas.width = img.width;
          canvas.height = img.height;
          ctx.drawImage(img, 0, 0);
          originalImageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
        };
        img.src = event.target.result;
      };
      reader.readAsDataURL(file);
    });

    addTextBtn.addEventListener('click', () => {
      const text = textInput.value.trim();
      if (!text) return;
      ctx.fillStyle = textColor.value;
      ctx.font = '40px sans-serif';
      ctx.fillText(text, 20, 60);
    });

    brightnessRange.addEventListener('input', applyFilters);
    contrastRange.addEventListener('input', applyFilters);
    saturationRange.addEventListener('input', applyFilters);

    resetBtn.addEventListener('click', () => {
      if (!originalImageData) return;
      brightnessRange.value = contrastRange.value = saturationRange.value = 0;
      ctx.putImageData(originalImageData, 0, 0);
    });

    downloadBtn.addEventListener('click', () => {
      const link = document.createElement('a');
      link.download = 'edited-image.png';
      link.href = canvas.toDataURL();
      link.click();
    });
  </script></body>
</html>